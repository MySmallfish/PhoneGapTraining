<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>PhoneGap</title>
    <link type="text/css" href="app.css" rel="stylesheet"/>
    <script src="phonegap.js"></script>
    <script src="barcodescanner.js"></script>
    <script>
        document.addEventListener("deviceready", function () {
            var pgElement = document.getElementById("PhoneGapReady");
            pgElement.style.display = "";

            var buttons = document.getElementById("APIs").getElementsByTagName("button");
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].removeAttribute("disabled");
            }
            document.addEventListener("backbutton", function() {
                navigator.notification.alert("Are you leaving???");
                navigator.exitApp();
            }, false);
        }, false);


        function openCamera() {
            navigator.camera.getPicture(
                function(url) {
                    var img = document.getElementById("image");
                    img.setAttribute("src", url);
                }, function(error) {
                    navigator.notification.alert("Error calling camera: " + error.message );
                }, {
                    sourceType: Camera.PictureSourceType.CAMERA,
                    quality: 75,
                    destinationType: Camera.DestinationType.FILE_URI
                });
        }

        function getGpsLocation() {
            navigator.geolocation.getCurrentPosition(
                function(position) {
                    navigator.notificationalert('Latitude: ' + position.coords.latitude + '\n' +
     'Longitude: ' + position.coords.longitude + '\n' +
     'Altitude: ' + position.coords.altitude + '\n' +
     'Accuracy: ' + position.coords.accuracy + '\n' +
     'Altitude Accuracy: ' + position.coords.altitudeAccuracy + '\n' +
     'Heading: ' + position.coords.heading + '\n' +
     'Speed: ' + position.coords.speed + '\n' +
     'Timestamp: ' + position.timestamp + '\n');
                },function(error) {
                    navigator.notification.alert("Error calling gps: " + error.message );
                });
        }

        function getAccelerometer() {
            navigator.accelerometer.getCurrentAcceleration(
                function (acceleration) {
                    alert('Acceleration X: ' + acceleration.x + '\n' +
                          'Acceleration Y: ' + acceleration.y + '\n' +
                          'Acceleration Z: ' + acceleration.z + '\n' +
                          'Timestamp: ' + acceleration.timestamp + '\n');
                },
                function (error) {
                navigator.notification.alert("Error calling camera: " + error.message );
            });
        }

        function scanBarcode() {

            var scanner;
            if (typeof cordova !== "undefined") {
                scanner = cordova.require("cordova/plugin/BarcodeScanner");
            }
            if (scanner) {
                scanner.scan(function(result) {
                    var barcode = result.text;

                    document.getElementById("barcode").innerHTML = barcode;
                });
            }
            
        }

    </script>

</head>
    <body>
        <h1>PhoneGap example</h1>
        <div id="PhoneGapReady" class="PhoneGapReady">
            <h2>
                Phonegap Is Ready to use!
            </h2>
        </div>
        
        <div id="APIs">
            <img width="200" height="100" id="image"/>
            <button type="button" onclick="openCamera()" disabled="disabled">Camera</button>
            <button type="button" onclick="saveToFile()" disabled="disabled">Save To File</button>
            <div id="gpsLocation"></div>
            <button type="button" onclick="getGpsLocation()" disabled="disabled">GPS</button>
            <div id="accelerometer"></div>
            <button type="button" onclick="getAccelerometer()" disabled="disabled">Accelerometer</button>
            <div id="barcode"></div>
            <button type="button" onclick="scanBarcode()" disabled="disabled">Barcode</button>
        </div>
    

    </body>
</html>
